{"ast":null,"code":"import { Observable, Subject, debounceTime, distinctUntilChanged, switchMap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../movie.service\";\nimport * as i2 from \"@angular/common\";\n\nfunction MovieSearchComponent_li_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"li\", 5);\n  }\n}\n\nexport class MovieSearchComponent {\n  constructor(movieService) {\n    this.movieService = movieService;\n    this.searchedSubject = new Subject();\n  }\n\n  searchMovie(searchedString) {\n    console.log(`searchedString=${searchedString}`);\n    this.searchedSubject.next(searchedString);\n  }\n\n  ngOnInit() {\n    this.movies$ = this.searchedSubject.pipe(debounceTime(300), //wait 300ms after each keystroke before considering the seared string\n    distinctUntilChanged(), //igno new string if same as previous string\n    switchMap(searchedString => this.movieService.searchMovie(searchedString)));\n  }\n\n}\n\nMovieSearchComponent.ɵfac = function MovieSearchComponent_Factory(t) {\n  return new (t || MovieSearchComponent)(i0.ɵɵdirectiveInject(i1.MovieService));\n};\n\nMovieSearchComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MovieSearchComponent,\n  selectors: [[\"app-movie-search\"]],\n  decls: 8,\n  vars: 3,\n  consts: [[\"id\", \"movies\"], [3, \"keyup\"], [\"searchBox\", \"\"], [1, \"movies\"], [\"class\", \"movie\", 4, \"ngFor\", \"ngForOf\"], [1, \"movie\"]],\n  template: function MovieSearchComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r3 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h4\");\n      i0.ɵɵtext(2, \"Movie search\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"input\", 1, 2);\n      i0.ɵɵlistener(\"keyup\", function MovieSearchComponent_Template_input_keyup_3_listener() {\n        i0.ɵɵrestoreView(_r3);\n\n        const _r0 = i0.ɵɵreference(4);\n\n        return i0.ɵɵresetView(ctx.searchMovie(_r0.value));\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"ul\", 3);\n      i0.ɵɵtemplate(6, MovieSearchComponent_li_6_Template, 1, 0, \"li\", 4);\n      i0.ɵɵpipe(7, \"async\");\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(7, 1, ctx.movies$));\n    }\n  },\n  dependencies: [i2.NgForOf, i2.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJtb3ZpZS1zZWFyY2guY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"mappings":"AACA,SAASA,UAAT,EAAyBC,OAAzB,EAAiCC,YAAjC,EAA8CC,oBAA9C,EAAmEC,SAAnE,QAAoF,MAApF;;;;;;;ICGAC;;;;ADMA,OAAM,MAAOC,oBAAP,CAA2B;EAG7BC,YAAoBC,YAApB,EAA8C;IAA1B;IADd,uBAAgB,IAAIP,OAAJ,EAAhB;EAC6C;;EAEvDQ,WAAW,CAACC,cAAD,EAAsB;IACjCC,OAAO,CAACC,GAAR,CAAY,kBAAkBF,cAAc,EAA5C;IACA,KAAKG,eAAL,CAAqBC,IAArB,CAA0BJ,cAA1B;EACC;;EACDK,QAAQ;IACN,KAAKC,OAAL,GAAa,KAAKH,eAAL,CAAqBI,IAArB,CACXf,YAAY,CAAC,GAAD,CADD,EACY;IACvBC,oBAAoB,EAFT,EAEe;IAC1BC,SAAS,CAAEM,cAAD,IAAyB,KAAKF,YAAL,CAAkBC,WAAlB,CAA8BC,cAA9B,CAA1B,CAHE,CAAb;EAKD;;AAfgC;;;mBAApBJ,sBAAoBD;AAAA;;;QAApBC;EAAoBY;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;;;MCVjCjB,+BAAiB,CAAjB,EAAiB,IAAjB;MACIA;MAAYA;MAChBA;MAAkBA;QAAAA;;QAAA;;QAAA,OAASA,0CAAT;MAAqC,CAArC;MAAlBA;MACAA;MACAA;;MAGAA;;;;MAHsBA;MAAAA","names":["Observable","Subject","debounceTime","distinctUntilChanged","switchMap","i0","MovieSearchComponent","constructor","movieService","searchMovie","searchedString","console","log","searchedSubject","next","ngOnInit","movies$","pipe","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\Projects\\Angular5\\src\\app\\movie-search\\movie-search.component.ts","D:\\Projects\\Angular5\\src\\app\\movie-search\\movie-search.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Observable, of, Subject,debounceTime,distinctUntilChanged,switchMap } from 'rxjs';\nimport {Movie} from '../../models/movie';\nimport { MovieService } from '../movie.service';\n\n@Component({\n  selector: 'app-movie-search',\n  templateUrl: './movie-search.component.html',\n  styleUrls: ['./movie-search.component.css']\n})\nexport class MovieSearchComponent implements OnInit {\n  movies$:Observable<Movie[]>;   \n  private searchedSubject=new Subject<string>();\n    constructor(private movieService: MovieService) { }\n\nsearchMovie(searchedString:string):void{\nconsole.log(`searchedString=${searchedString}`);\nthis.searchedSubject.next(searchedString);\n}\nngOnInit(): void {\n  this.movies$=this.searchedSubject.pipe(\n    debounceTime(300),     //wait 300ms after each keystroke before considering the seared string\n    distinctUntilChanged(),   //igno new string if same as previous string\n    switchMap((searchedString:string)=>this.movieService.searchMovie(searchedString))\n  );\n}\n}\n","<div id=\"movies\">\n<h4>Movie search</h4>\n<input #searchBox (keyup)=\"searchMovie(searchBox.value)\">\n<ul class=\"movies\">\n<li *ngFor=\"let movie of movies$|async\" class=\"movie\">\n\n</li>\n</ul>\n</div>\n"]},"metadata":{},"sourceType":"module"}